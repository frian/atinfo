@import "base";
@import "common";

/*
	-- TOP AND BOTTOM MASKS ------------------------------------------------------
*/
.mask {
    position: absolute;
    top: 50%;
    width: 100%;
    height: 100%;
    background-color: $bg-color;
    z-index: 10;
}
#mask {
    margin-top: 250px;
}

#mask2 {
    margin-top: -250px;
    transform-origin: 0% 0%;
    @include transform(rotateX(180deg)  );
}

.mask2Container {
    @include transform(rotateX(180deg));
}


/*
	-- TRUNK ---------------------------------------------------------------------
*/
#trunk {
  height: 2000px;
  width: 2000px;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 50%;
  right: 0;
  margin: auto;
  margin-left: -282px;
  border: 2px solid #333;
  @include border-left-radius(1000px);
}

#trunkMask {
    width: 50px;
    height: 500px;
    margin-top: -250px;
    margin-left: -290px;
    background-color: $bg-color;
    @include abs-centered();
    @include animation('growTrunk 4s linear forwards');
}

@include keyframes(growTrunk) {
  0%   { margin-top: -250px; }
  100% { margin-top: -750px; }
}


/*
	-- LEAVES --------------------------------------------------------------------
*/
.leaf {
    @include border-radius(1% 90%);
    border: 2px solid $bg-color;
    height: 100px;
    margin: auto;
    width: 100px;
    position: absolute;
    left: 0px;
    transform-origin: left top;

    background-color: #080;
}

#leaf1 {
    top: 500px;
    @include transform(rotateZ(180deg));
    @include animation('leafGrow1 6s ease-out forwards');
}

#leaf2 {
    top: 500px;
    @include transform(rotateX(180deg) scale(0.01));
    @include animation('leafGrow2 6s ease-out 1s forwards');
}

#leaf3 {
    top: 350px;
    left: -26px;
    @include transform(rotateZ(180deg) scale(0.01));
    @include animation('leafGrow3 6s ease-out 2s forwards');
}

#leaf4 {
    top: 250px;
    left: -34px;
    @include transform(rotateX(180deg) scale(0.01));
    @include animation('leafGrow4 6s ease-out 3s forwards');
}


@include keyframes(leafGrow1) {
    from {
        @include transform(scale(0.01) rotateZ(180deg));

    }
    to {
        @include transform(scale(1) rotateZ(180deg));
    }
}

@include keyframes(leafGrow2) {
    from {
        @include transform(scale(0.01) rotateX(180deg));

    }
    to {
        @include transform(scale(1) rotateX(180deg));
    }
}

@include keyframes(leafGrow3) {
    from {
        @include transform(scale(0.01) rotateX(180deg));

    }
    to {
        @include transform(scale(0.8) rotateX(180deg));
    }
}

@include keyframes(leafGrow4) {
    from {
        @include transform(scale(0.01) rotateZ(180deg));

    }
    to {
        @include transform(scale(0.6) rotateZ(180deg));
    }
}


/*
	-- CENTER --------------------------------------------------------------------
*/
// $bgGrey1: #fff;
// $bgGrey2: #ddd;
// $bgColor1: #0ac;
// $bgColor2: #0072BC;

$centerSize: 40px;
#serviceCenter {
    position: absolute;
    border: 2px solid $bg-color;
    background-color: $bgColor2;
    width: $centerSize;
    height: $centerSize;
    top: -$centerSize / 2;
    left: -$centerSize / 2;
    z-index: 50;
    @include border-radius($centerSize);
    @include transform(scale(0));
    @include animation('centerGrow 4s ease-out 4s forwards');
}

@include keyframes(centerGrow) {
    from {
        @include transform(scale(0));
    }
    to {
        @include transform(scale(1));
    }
}


/*
	-- PETALS --------------------------------------------------------------------
*/
.servicePetal {
    position: absolute;
    top: 1px;
    left: 3px;
    border-radius: 50% 90% 10% 95%;
    border-top: 2px solid $bg-color;
    border-right: 2px solid $bg-color;
    height: 50px;
    margin: auto;
    width: 50px;
    transform-origin: left top;
    opacity: 0;
    z-index: 20;
}


// animation
@mixin defineServicePetalAnim($anim) {
    @include animation("#{$anim} 6s ease-out 4s forwards");
}

// create petal ids and add animation
@for $i from 101 through 118 {
    #servicePetal#{$i} { @include defineServicePetalAnim( "spin#{$i}") }
}

// start angle
$serviceAngleOffset: -5deg;
$serviceAngleStep: 20deg;

// petal angles
$serviceSpin1Angle:  $serviceAngleStep * 18;
$serviceSpin2Angle:  $serviceAngleStep * 17;
$serviceSpin3Angle:  $serviceAngleStep * 16;
$serviceSpin4Angle:  $serviceAngleStep * 15;
$serviceSpin5Angle:  $serviceAngleStep * 14;
$serviceSpin6Angle:  $serviceAngleStep * 13;
$serviceSpin7Angle:  $serviceAngleStep * 12;
$serviceSpin8Angle:  $serviceAngleStep * 11;
$serviceSpin9Angle:  $serviceAngleStep * 10;
$serviceSpin10Angle: $serviceAngleStep * 9;
$serviceSpin11Angle: $serviceAngleStep * 8;
$serviceSpin12Angle: $serviceAngleStep * 7;
$serviceSpin13Angle: $serviceAngleStep * 6;
$serviceSpin14Angle: $serviceAngleStep * 5;
$serviceSpin15Angle: $serviceAngleStep * 4;
$serviceSpin16Angle: $serviceAngleStep * 3;
$serviceSpin17Angle: $serviceAngleStep * 2;
$serviceSpin18Angle: $serviceAngleStep;

@mixin serviceAnimStart {
    opacity: 0;
    @include transform(rotate($serviceAngleOffset) scale(0.01));
}

@mixin serviceAnimEnd($angle,$scale) {
    opacity: 1;
    @include transform(rotate($angle) scale($scale));
}

@mixin createServiceAnim($name, $angle, $startColor, $endColor) {

    @include keyframes(#{$name}) {
        0% {
            @include serviceAnimStart;
        }
        50% {
            @include serviceAnimEnd($angle, 1);
            background-color: $startColor;
        }
        60% {
            @include serviceAnimEnd($angle, 1);
            background-color: $endColor;
        }
        100% {
            @include serviceAnimEnd($angle, 2);
            background-color: $endColor;
            opacity: 0.5;
        }
    }
}

@include createServiceAnim("spin101", $serviceAngleOffset - $serviceSpin1Angle, $bgGrey1, $bgColor1);
@include createServiceAnim("spin102", $serviceAngleOffset - $serviceSpin2Angle, $bgGrey2, $bgColor2);
@include createServiceAnim("spin103", $serviceAngleOffset - $serviceSpin3Angle, $bgGrey1, $bgColor1);
@include createServiceAnim("spin104", $serviceAngleOffset - $serviceSpin4Angle, $bgGrey2, $bgColor2);
@include createServiceAnim("spin105", $serviceAngleOffset - $serviceSpin5Angle, $bgGrey1, $bgColor1);
@include createServiceAnim("spin106", $serviceAngleOffset - $serviceSpin6Angle, $bgGrey2, $bgColor2);
@include createServiceAnim("spin107", $serviceAngleOffset - $serviceSpin7Angle, $bgGrey1, $bgColor1);
@include createServiceAnim("spin108", $serviceAngleOffset - $serviceSpin8Angle, $bgGrey2, $bgColor2);
@include createServiceAnim("spin109", $serviceAngleOffset - $serviceSpin9Angle, $bgGrey1, $bgColor1);
@include createServiceAnim("spin110", $serviceAngleOffset - $serviceSpin10Angle, $bgGrey2, $bgColor2);
@include createServiceAnim("spin111", $serviceAngleOffset - $serviceSpin11Angle, $bgGrey1, $bgColor1);
@include createServiceAnim("spin112", $serviceAngleOffset - $serviceSpin12Angle, $bgGrey2, $bgColor2);
@include createServiceAnim("spin113", $serviceAngleOffset - $serviceSpin13Angle, $bgGrey1, $bgColor1);
@include createServiceAnim("spin114", $serviceAngleOffset - $serviceSpin14Angle, $bgGrey2, $bgColor2);
@include createServiceAnim("spin115", $serviceAngleOffset - $serviceSpin15Angle, $bgGrey1, $bgColor1);
@include createServiceAnim("spin116", $serviceAngleOffset - $serviceSpin16Angle, $bgGrey2, $bgColor2);
@include createServiceAnim("spin117", $serviceAngleOffset - $serviceSpin17Angle, $bgGrey1, $bgColor1);
@include createServiceAnim("spin118", $serviceAngleOffset - $serviceSpin18Angle, $bgGrey2, $bgColor2);
